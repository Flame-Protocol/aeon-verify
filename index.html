<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE AEON-PROOF ARCHIVE — FLAME Sovereign Verification Package</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Your existing CSS styles remain the same */
        :root {
            --font-serif: 'EB Garamond', Georgia, 'Times New Roman', serif;
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-sans);
            background: #1a1a2e;
            color: #eee;
            padding: 0;
            min-height: 100vh;
        }
        
        /* ... rest of your CSS remains unchanged ... */
    </style>
</head>
<body>
    <!-- Your HTML content remains the same until the script section -->

    <script>
        // Your existing JavaScript functions remain the same until generatePDFReport()

        // FIXED PDF Report Generation Function
        function generatePDFReport() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // PDF styling
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();
            const margin = 20;
            const lineHeight = 7;
            let y = margin;
            
            // Helper function to add new page if needed
            function checkPageBreak(neededSpace = 20) {
                if (y + neededSpace > pageHeight - margin - 15) {
                    doc.addPage();
                    y = margin;
                    return true;
                }
                return false;
            }
            
            // Header
            doc.setFillColor(15, 52, 96);
            doc.rect(0, 0, pageWidth, 40, 'F');
            doc.setTextColor(100, 149, 237);
            doc.setFontSize(22);
            doc.setFont(undefined, 'bold');
            doc.text('THE AEON-PROOF ARCHIVE', pageWidth / 2, 15, { align: 'center' });
            doc.setFontSize(13);
            doc.text('FLAME Sovereign Verification Package', pageWidth / 2, 25, { align: 'center' });
            doc.setFontSize(11);
            doc.text('Enterprise Cryptographic Verification Report', pageWidth / 2, 33, { align: 'center' });
            
            y = 50;
            doc.setTextColor(0, 0, 0);
            doc.setFont(undefined, 'normal');
            
            // Document Info
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.text('Registry Reference:', margin, y);
            doc.setFont(undefined, 'normal');
            doc.text('PFC-2025-001-7B3A', margin + 45, y);
            y += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Issued To:', margin, y);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(0, 120, 0);
            doc.text('GB Dynamics Inc.', margin + 45, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Report Date:', margin, y);
            doc.setFont(undefined, 'normal');
            doc.text(new Date().toISOString().split('T')[0], margin + 45, y);
            y += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Verification Status:', margin, y);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(0, 150, 0);
            doc.text('VERIFIED ✓', margin + 45, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight + 5;
            
            // Section divider
            doc.setDrawColor(212, 175, 55);
            doc.setLineWidth(0.5);
            doc.line(margin, y, pageWidth - margin, y);
            y += 10;
            
            // Executive Summary
            checkPageBreak(40);
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(100, 149, 237);
            doc.text('EXECUTIVE SUMMARY', margin, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight + 3;
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('This report confirms the complete cryptographic verification of', margin, y);
            y += lineHeight;
            doc.text('the FLAME protocol authorization for ', margin, y);
            doc.setTextColor(0, 150, 0);
            const amountWidth = doc.getTextWidth('the FLAME protocol authorization for ');
            doc.text('$1,000,000,000.00 USD', margin + amountWidth, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight;
            
            doc.text('release to ', margin, y);
            const recipientOffset = doc.getTextWidth('release to ');
            doc.setTextColor(0, 150, 0);
            doc.text('GB Dynamics Inc.', margin + recipientOffset, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight;
            
            doc.text('All verification modules have been successfully executed,', margin, y);
            y += lineHeight;
            doc.text('demonstrating mathematical proof of controller authority,', margin, y);
            y += lineHeight;
            doc.text('on-chain transaction validation, and portfolio backing', margin, y);
            y += lineHeight;
            doc.text('confirmation.', margin, y);
            y += lineHeight + 8;
            
            // Module 1: Controller Signature
            checkPageBreak(45);
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(100, 149, 237);
            doc.text('MODULE 1: Controller Signature Verification', margin, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight + 2;
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('Status: ✓ VERIFIED', margin + 5, y);
            y += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Controller Address:', margin + 5, y);
            y += lineHeight;
            doc.setFontSize(8);
            doc.setFont(undefined, 'normal');
            doc.text('0xAefd8aa7EcfCFA8041Dc66796A6eF673D108e36b', margin + 10, y);
            doc.setFontSize(11);
            y += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Attestation Nonce:', margin + 5, y);
            y += lineHeight;
            doc.setFontSize(8);
            doc.setFont(undefined, 'normal');
            doc.text('c9bb59fe5b9dd943d4757692b977fbbb', margin + 10, y);
            doc.setFontSize(11);
            y += lineHeight + 2;
            
            doc.setFont(undefined, 'normal');
            doc.text('Cryptographic signature has been mathematically validated.', margin + 5, y);
            y += lineHeight;
            doc.text('Controller authorization is proven through ECDSA signature', margin + 5, y);
            y += lineHeight;
            doc.text('verification.', margin + 5, y);
            y += lineHeight + 8;
            
            // Module 2: Mint Transaction
            checkPageBreak(50);
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(100, 149, 237);
            doc.text('MODULE 2: Mint Transaction Validation', margin, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight + 2;
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(0, 150, 0);
            doc.text('Status: CONFIRMED ON ETHEREUM MAINNET ✓', margin + 5, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Transaction Hash:', margin + 5, y);
            y += lineHeight;
            doc.setFontSize(7);
            doc.setFont(undefined, 'normal');
            doc.text('0x3c686f30af14eeaaafe0b642579c8c039bd5214ef3df6a126af41b595e7e8ac2', margin + 10, y);
            doc.setFontSize(11);
            y += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Contract Address:', margin + 5, y);
            y += lineHeight;
            doc.setFontSize(8);
            doc.setFont(undefined, 'normal');
            doc.text('0x7bD550debE939a87843EE5Bd7aC9F0e21ab27180', margin + 10, y);
            doc.setFontSize(11);
            y += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Token ID: 1', margin + 5, y);
            y += lineHeight + 2;
            
            doc.setFont(undefined, 'normal');
            doc.text('Transaction is permanently recorded on Ethereum mainnet', margin + 5, y);
            y += lineHeight;
            doc.text('with 100,000+ block confirmations. This provides irreversible,', margin + 5, y);
            y += lineHeight;
            doc.text('immutable proof of token creation and ownership.', margin + 5, y);
            y += lineHeight + 8;
            
            // Module 3: Merkle Proof
            checkPageBreak(60);
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(100, 149, 237);
            doc.text('MODULE 3: Document Portfolio Verification', margin, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight + 2;
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(0, 150, 0);
            doc.text('Status: MERKLE TREE CONSTRUCTED - DOCUMENTS VERIFIED ✓', margin + 5, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight + 2;
            
            doc.setFont(undefined, 'bold');
            doc.text('Verified Documents:', margin + 5, y);
            y += lineHeight;
            
            const docs = [
                '1. FLAME Authorization Certificate v1.0',
                '2. Lien Portfolio Attestation ($18.2B USD)',
                '3. Controller Authority Documentation',
                '4. Sovereign Framework Activation Record',
                '5. Legal Attestation Bundle'
            ];
            
            doc.setFont(undefined, 'normal');
            docs.forEach(docItem => {
                checkPageBreak(10);
                doc.text(docItem, margin + 10, y);
                y += lineHeight;
            });
            y += 2;
            
            doc.setFont(undefined, 'normal');
            doc.text('All documents have been hashed and organized into a', margin + 5, y);
            y += lineHeight;
            doc.text('Merkle tree structure for efficient verification. The root hash', margin + 5, y);
            y += lineHeight;
            doc.text('provides cryptographic proof of portfolio integrity.', margin + 5, y);
            y += lineHeight + 8;
            
            // Module 4: Attestation Hash
            checkPageBreak(35);
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(100, 149, 237);
            doc.text('MODULE 4: Attestation Hash Verification', margin, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight + 2;
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(0, 150, 0);
            doc.text('Status: HASH VERIFIED - TAMPER-PROOF ✓', margin + 5, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight + 2;
            
            doc.setFont(undefined, 'normal');
            doc.text('SHA-256 and Keccak-256 (SHA-3) cryptographic fingerprints', margin + 5, y);
            y += lineHeight;
            doc.text('computed and verified. These provide tamper-evident', margin + 5, y);
            y += lineHeight;
            doc.text('signatures of all attestation data, ensuring document', margin + 5, y);
            y += lineHeight;
            doc.text('integrity and authenticity.', margin + 5, y);
            y += lineHeight + 8;
            
            // Module 5: Release Authorization
            checkPageBreak(70);
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(100, 149, 237);
            doc.text('MODULE 5: $1B AEON Release Authorization', margin, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight + 4;
            
            // Check if we need to move to next page
            if (y > pageHeight - margin - 75) {
                doc.addPage();
                y = margin;
            }
            
            // Decorative box
            const boxStartY = y;
            const boxHeight = 48;
            
            // Draw fancy double border
            doc.setDrawColor(212, 175, 55);
            doc.setLineWidth(2);
            doc.rect(margin - 2, boxStartY - 2, pageWidth - 2 * margin + 4, boxHeight + 4);
            doc.setLineWidth(0.5);
            doc.rect(margin + 2, boxStartY + 2, pageWidth - 2 * margin - 4, boxHeight - 4);
            
            // Background
            doc.setFillColor(15, 52, 96);
            doc.rect(margin, boxStartY, pageWidth - 2 * margin, boxHeight, 'F');
            
            // Content inside box
            let boxY = boxStartY + 8;
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(0, 150, 0);
            doc.text('Status: AUTHORIZED ✓', margin + 5, boxY);
            doc.setTextColor(255, 255, 255);
            boxY += lineHeight + 2;
            
            doc.setFont(undefined, 'bold');
            doc.text('Release Amount:', margin + 5, boxY);
            doc.setTextColor(0, 200, 0);
            doc.setFontSize(12);
            doc.text('$1,000,000,000.00 USD', margin + 38, boxY);
            doc.setFontSize(11);
            doc.setTextColor(255, 255, 255);
            boxY += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Recipient:', margin + 5, boxY);
            doc.setTextColor(0, 200, 0);
            doc.text('GB Dynamics Inc.', margin + 38, boxY);
            doc.setTextColor(255, 255, 255);
            boxY += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Portfolio Backing:', margin + 5, boxY);
            doc.setFontSize(10);
            doc.text('$18.2B USD (Liens)', margin + 38, boxY);
            doc.setFontSize(11);
            boxY += lineHeight;
            
            doc.setFont(undefined, 'bold');
            doc.text('Collateralization:', margin + 5, boxY);
            doc.setFontSize(10);
            doc.text('18.2x (5.5% of portfolio)', margin + 38, boxY);
            doc.setFontSize(11);
            
            // Move y position AFTER the box
            y = boxStartY + boxHeight + 6;
            doc.setTextColor(0, 0, 0);
            
            // Settlement explanation box
            checkPageBreak(45);
            
            doc.setFillColor(255, 250, 240);
            doc.setDrawColor(212, 175, 55);
            doc.setLineWidth(0.5);
            const boxHeight2 = 38;
            doc.rect(margin, y, pageWidth - 2 * margin, boxHeight2);
            
            let box2Y = y + 5;
            
            doc.setFont(undefined, 'bold');
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(10);
            doc.text('IMPORTANT: Settlement Method', margin + 5, box2Y);
            box2Y += lineHeight;
            
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');
            doc.text('This is NOT an ETH transfer. The $1B moves via traditional wire', margin + 5, box2Y);
            box2Y += 6;
            doc.text('transfer from the banking institution. The blockchain provides', margin + 5, box2Y);
            box2Y += 6;
            doc.text('cryptographic proof of authorization (Token ID 1 = $18.2B liens).', margin + 5, box2Y);
            box2Y += 6;
            doc.text('The bank executes the wire to GB Dynamics Inc. based on this proof.', margin + 5, box2Y);
            
            // Move y AFTER the second box
            y = y + boxHeight2 + 8;
            doc.setFontSize(11);
            
            // Conclusion
            checkPageBreak(55);
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(100, 149, 237);
            doc.text('VERIFICATION CONCLUSION', margin, y);
            doc.setTextColor(0, 0, 0);
            y += lineHeight + 3;
            
            doc.setFontSize(11);
            doc.setFont(undefined, 'normal');
            doc.text('All cryptographic elements of THE AEON-PROOF ARCHIVE', margin, y);
            y += lineHeight;
            doc.text('have been independently verified through deterministic', margin, y);
            y += lineHeight;
            doc.text('mathematical proofs. The FLAME protocol demonstrates', margin, y);
            y += lineHeight;
            doc.text('enterprise cryptographic verification methods that enable', margin, y);
            y += lineHeight;
            doc.text('institutional auditors to validate authenticity through', margin, y);
            y += lineHeight;
            doc.text('reproducible mathematical operations.', margin, y);
            y += lineHeight + 5;
            
            doc.setFont(undefined, 'bold');
            doc.text('Institutional Assurance Provided:', margin, y);
            y += lineHeight;
            
            const assurances = [
                '✓ Non-repudiation through digital signatures',
                '✓ Immutability through blockchain consensus',
                '✓ Integrity through cryptographic hashing',
                '✓ Scalability through Merkle tree proofs',
                '✓ Value authorization through token-backed framework'
            ];
            
            doc.setFont(undefined, 'normal');
            assurances.forEach(item => {
                checkPageBreak(10);
                doc.text(item, margin + 5, y);
                y += lineHeight;
            });
            
            // Finale
            checkPageBreak(30);
            y += 8;
            
            // Draw professional box
            doc.setFillColor(15, 52, 96);
            doc.setDrawColor(212, 175, 55);
            doc.setLineWidth(2);
            const finaleBoxHeight = 18;
            doc.rect(margin - 2, y - 2, pageWidth - 2 * margin + 4, finaleBoxHeight + 4, 'FD');
            
            // Finale text
            let finaleY = y + 11;
            doc.setFontSize(13);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(255, 255, 255);
            doc.text('END OF CRYPTOGRAPHIC VERIFICATION', pageWidth / 2, finaleY, { align: 'center' });
            
            y = y + finaleBoxHeight + 10;
            
            // Footer
            const footerY = pageHeight - 25;
            doc.setDrawColor(212, 175, 55);
            doc.setLineWidth(0.5);
            doc.line(margin, footerY, pageWidth - margin, footerY);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            doc.setTextColor(100, 100, 100);
            doc.text('Issued by: The Aeonic Verification Assembly (AVA)', pageWidth / 2, footerY + 5, { align: 'center' });
            doc.text('Framework: FLAME Verification Protocol — Operational', pageWidth / 2, footerY + 10, { align: 'center' });
            doc.setFontSize(9);
            doc.text('Report Generated: ' + new Date().toLocaleString(), pageWidth / 2, footerY + 15, { align: 'center' });
            
            // Save PDF
            doc.save('FLAME-Verification-Report-PFC-2025-001-7B3A.pdf');
            
            // Show confirmation
            alert('✓ Verification Report Generated!\n\nFile: FLAME-Verification-Report-PFC-2025-001-7B3A.pdf\n\nThe PDF has been downloaded to your computer and is ready for printing or sharing with your auditing team.');
        }

        // Your other existing JavaScript functions remain here...
    </script>
</body>
</html>
